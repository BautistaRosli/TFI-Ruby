<div class="container">
  <div class="disk-show-card">
    <div class="disk-show-info">
      <h1 class="disk-show-title"><%= @disk.name %></h1>

      <ul class="disk-details">
        <li><strong>Artista:</strong> <span class="muted"><%= @disk.author %></span></li>
        <li><strong>A침o:</strong> <span class="muted"><%= @disk.year if @disk.respond_to?(:year) %></span></li>
        <li><strong>Formato:</strong> <span class="muted"><%= @disk.format %></span></li>
        <li><strong>Precio:</strong> <span class="price">$<%= @disk.unit_price %></span></li>
      </ul>

      <div class="disk-description">
        <h2>Descripci칩n</h2>
        <div class="description-body">
          <%= simple_format(@disk.description || 'Sin descripci칩n disponible') %>
        </div>
        </div>

        <div class="disk-audio">
          <h3>Audio de muestra</h3>
          <audio id="sample-audio" preload="none">
            <source src="/samsung-sound.mp3" type="audio/mpeg">
            Tu navegador no soporta audio.
          </audio>
          <div style="margin-top:10px">
            <button id="play-sample" type="button" class="btn-primary">Reproducir audio</button>
          </div>
        </div>

        <div class="disk-actions">
          <%= link_to 'Volver al cat치logo', disk_used_index_path, class: 'btn-outline btn-gold' %>
        </div>
    </div>

    <div class="disk-show-media">
      <% if @disk.cover.present? %>
        <%= image_tag @disk.cover, alt: @disk.name, class: 'disk-large-img' %>
      <% else %>
        <%= image_tag '/tony/tony2.png', alt: 'Portada provisional', class: 'disk-large-img' %>
      <% end %>
    </div>

  </div>


</div>

<script>
  (function(){
    function setup(){
      var btn = document.getElementById('play-sample');
      var audio = document.getElementById('sample-audio');
      if(!btn || !audio) return;
      btn.addEventListener('click', function(){
        if(audio.paused){
          audio.play();
          btn.textContent = 'Pausar audio';
        } else {
          audio.pause();
          btn.textContent = 'Reproducir audio';
        }
      });
      audio.addEventListener('ended', function(){ btn.textContent = 'Reproducir audio'; });
    }
    document.addEventListener('DOMContentLoaded', setup);
    document.addEventListener('turbo:load', setup);
  })();
</script>
