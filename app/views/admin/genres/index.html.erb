<% content_for :stylesheets do %>
  <%= stylesheet_link_tag 'admin_layout', media: 'all' %>
  <%= stylesheet_link_tag 'admin_index', media: 'all' %>
  <%= stylesheet_link_tag 'admin_disks', media: 'all' %>
<% end %>

<div class="dashboard-container">
  <header class="admin-header">
    <div class="header-content">
      <div class="header-top">
        <div>
          <h1 class="header-title">Gestión de Géneros</h1>
          <p class="header-subtitle">Creá, editá y eliminá géneros musicales</p>
        </div>
        <div class="header-buttons">
          <%= link_to 'Volver a Discos', admin_disks_path, class: 'btn-logout' %>
        </div>
      </div>
    </div>
  </header>

  <main class="admin-main">
    <section class="module-card" style="padding:1.5rem; margin-bottom:16px;">
      <h3 class="card-title">Crear nuevo género</h3>
      <%= form_with model: [:admin, @genre], local: true do |f| %>
        <div style="display:flex; gap:8px; align-items:center;">
          <%= f.text_field :name, placeholder: "Nombre de género", required: true, class: "form-control" %>
          <%= f.submit "Crear", class: "btn btn-primary" %>
        </div>
        <% if @genre.errors.any? %>
          <ul class="text-secondary" style="margin-top:8px;">
            <% @genre.errors.full_messages.each do |m| %><li><%= m %></li><% end %>
          </ul>
        <% end %>
      <% end %>
    </section>

    <section class="module-card" style="padding:1.5rem;">
      <h3 class="card-title">Listado de géneros</h3>
      <ul style="list-style:none; padding:0; margin:12px 0;">
        <% @genres.each do |g| %>
          <li style="display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-bottom:1px solid var(--border-color);">
            <span><%= g.name %></span>
            <div style="display:flex; gap:8px;">
              <%= link_to 'Editar', edit_admin_genre_path(g), class: 'btn btn-outline-secondary' %>
              <%= button_to 'Eliminar', admin_genre_path(g), method: :delete, class: 'btn btn-outline-secondary', form: { data: { turbo: false } } %>
            </div>
          </li>
        <% end %>
      </ul>
      <div class="pagination-wrap"><%= paginate @genres %></div>
    </section>
  </main>
</div>